\documentclass{IEEEtran}
%\documentclass{article}
\usepackage{cite}
\usepackage{url}
%\usepackage{lscape}

\usepackage{graphicx}
\usepackage{pdflscape}
\usepackage{rotating}
%\usepackage[a4paper,margin=.5in,landscape]{geometry}
\usepackage{booktabs}
\usepackage{array}

\begin{document}

\title{A survey on NoSQL and NewSQL datastores}
\author{Brecht Gossel\'e}
\maketitle

\section{Abstract}

Advances in bioinformatics have driven down the cost of genome sequencing dramatically over the past years. This raises the question how to efficiently and flexibly handle and store the large amount of data this process generates. Similar developments in web technology have over the last decade, spawned numerous NoSQL and NewSQL datastores, which offer robust, highly scalable distributed storage and flexible data modelling. This paper reviews 6 such datastores and compares them on characteristics relevant to high performance computing in general and bioinformatics more specifically. %TODO bioinformatics ding, is dit wel zo?

\section{Introduction}

%Getalletjes over DNA-sequencing
%NoSQL datamodellen, CAP, NewSQL fifolosie
%Tabel?



\section{Methodology}

Because of the enormous choice of NoSQL and NewSQL datastores, an exhaustive study wasn't possible. This survey reviews the most popular datastores in a few relevant categories, namely document stores, wide columnar stores and NewSQL stores. A selection was then made based on similar criteria as in \cite{grolinger2013data}, following the ranking of DB-Engine Ranking \cite{db_engine_rank} as an indicator of popularity. This ranking tries to measure popularity based on a few parameters, such as the number of mentions on Web sites, general interest according to Google Trends, frequency of technical discussions on the Web, number of job offers, and number of professional profiles in which the systems are mentioned. The result were the document stores MongoDB and CouchBase Server, wide columnar stores Cassandra and HBase and NewSQL database VoltDB. There is already an existing application of MongoDB in the sequencing pipeline, making it even more relevant. Lastly, NewSQL query engine Cloudera Impala was also taken into consideration because of explicit interested from researchers in the lab. %TODO eerste vermelding van lab?
These 6 systems were then compared on characteristics relevant to high performance computing, such as indexing mechanisms, client interfaces to the data, distribution strategy, concurrency control and consistency models.

\include{tabel}

%\include{tabel}
\section{Document stores}

\subsection{MongoDB}

MongoDB stores data in BSON (binary JSON) documents. It has powerful indexing support, with the ability to define secondary indexes of a wide array of types on all attributes, much like in the traditional relational model \cite{mongodb_indexes}. To aid with denormalization, the documents can contain embedded documents and arrays, thus obviating the need for joins in the query language.
\\MongoDB offers API's in many languages and the functionality to define the equivalent of SQL WHERE-clauses as javascript expressions. These are then translated to MongoDB's proprietary internal querying language \cite{grolinger2013data}. The MongoDB query optimizer processes queries and chooses the most efficient query plan for a query given the available indexes. These plans are cached if there are multiple viable options, and can be reevaluated as the data evolves \cite{mongodb_query_plans}.
\\The consistency of MongoDB is configurable, strong consistency can be attained in two ways: setting the connection to read-only from the master node (which has the most up-to-date version of the data), or forcing a write to succeed only after all replicas have acknowledged it. The former degrades the scaling ability of read requests, the latter the latency of write requests \cite{grolinger2013data}.
For concurrency control, MongoDB offers single-document atomicity and implements reader-writer locks. Having to lock on writes severely impacts performance in write-intensive scenarios.
\\\\As a wrap-up, MongoDB stores BSON-files accessible through many API's with flexible querying and indexing techniques, but its concurrency and consistency model have some drawbacks.

\subsection{CouchBase Server}

CouchBase, result of the merger of CouchDB and Membase, stores data in JSON documents. It uses the memcached protocol for distributed caching and is intended for highly interactive applications with low-latency requirements \cite{grolinger2013data}\cite{couchbase_about}.
\\The JSON documents can be nested and are queryable through a SQL-like language, N1QL (note: the latest version, released March 2014, was still a developer preview)\cite{couchbase_n1ql}.
\\Within one cluster, transactions are strongly consistent, but between multiple clusters only eventually consistent.
\\Couchbase lets clients choose between optimistic (using compare-and-swap) and pessimistic (using 'finegrained locking') concurrency control.
\\\\With its flexible data modelling, caching and concurrency control, Couchbase is a good fit for applications requiring fast and intensive interaction between client and data.


\section{Columnar stores}
%TODO LSM trees & bloom filters for both
\subsection{Cassandra}

Apache Cassandra, originally developped at Facebook but later open-sourced, combines the data-model of Google's BigTable system with the architecture and distribution strategy of Amazon's DynamoDB. It is intended for flexible, highly-available storage of very large datasets, running on cheap commodity hardware and offering high write throughput while not sacrificing read efficiency \cite{lakshman2010cassandra}.
\\
Since its inception Cassandra has however diverged slightly from the BigTable data model. It now offers tables and composite columns -much like in a conventional schema, and comes with its own query language, CQL\cite{cassandra_then&now}. CQL resembles SQL in many ways, but comes with some restrictions. For instance, it doesn't feature the JOIN clause \cite{cassandra_cql}. It strongly encourages physically collocating data that will be queried together, and supports denormalization with features such as collection types.\\
In order to scale linearly in the number of nodes to very large datasets, Cassandra operates in a fully masterless fashion. In terms of the CAP-theorem, it focusses on availability and partition-tolerance, rather than immediate consistency (though the user has control over the level of consistency, as will be explained). High availability and partition tolerance are achieved through asynchronous replication of rows over several nodes in the cluster, using consistent hashing and virtual nodes to handle high churn and incremental addition of nodes \cite{decandia2007dynamo} \cite{lakshman2010cassandra} \cite{cassandra_then&now}. The amount of replicas can be chosen by the client. Furthermore, Cassandra provides cross-datacenter replication to cope with entire datacenter failures.
\\On reads and writes, the client can specify the desired quorum, that is the number of replicas that acknowledge the operation. Although Cassandra was built with eventual consistency in mind, strong consistency can be obtained by choosing the quorum larger than the number of replicas \cite{grolinger2013data}.\\
In terms of concurrency control, Cassandra offers atomicity for single-row operations and serializable \textit{lightweight transactions}, essentially a compare-and-set functionality for larger operations \cite{cassandra_lightweight_trans}.\\
Being an open-source project, Cassandra is freely available, but there is an enterprise version with extra features such as integration with Apache Spark and Apache Solr, for complex analytical and search tasks \cite{cassandra_solr} \cite{cassandra_spark}.\\\\
In conclusion, Cassandra offers flexible data-modeling with decent querying and indexing support through its CQL-interface and scales incrementally to vast datasets, thanks to its extensive replication and failure-handling features.

\subsection{HBase}

Apache HBase is an open source datastore using Google BigTable's datamodel, but running on top of the Hadoop Distributed File System (HDFS) instead of the Google File System (GFS).
\\Since its launch, HBase has adopted several secondary indexing mechanisms. HBase doesn't offer an SQL-like advanced querying language, but because of its HDFS underpinnings it can function as both input and output for Map/Reduce jobs.
\\The strong points of HBase are its strong consistency, which is rare among NoSQL-stores, and its concurrency model: ACID-compliant single row transactions and optimistic multi-version concurrency control for wider scope operations\cite{hbase_acid}\cite{grolinger2013data}\cite{borthakur2011apache}.\\\\
In conclusion, HBase offers flexible data-modeling and is especially useful when there is already a HDFS dataset and when Map/Reduce compatibility is desired. It scales well to very large datasets and offers excellent concurrency control and strong consistency.

\section{NewSQL}
\subsection{VoltDB}

VoltDB is a relational in-memory distributed database, aiming to offer the guarantees of classical SQL-stores and the performance and scaling of NoSQL systems\cite{stonebraker2013voltdb}. %TODO rewrite
\\VoltDB stores data in the traditional relational model, but replicated and partitioned (using consistent hashing) over several nodes\cite{grolinger2013data}. The data is queryable through a (growing) subset of SQL-92 \cite{voltdb2010voltdb}.
Relying entirely on DRAM makes it expensive to scale to petabyte scale datavolumes, but VoltDB can export data to other, more suited DMBSs such as columnar NoSQL stores.
\\In terms of concurrency control, VoltDB offers full ACID-transactions which execute simultaneously on all replicas. Main memory is divided into chunks and these are statically assigned to individual, single-threaded cores. A global controller serializes all multi-node transactions single-node transactions and are inserted into the transactions queues of the respective nodes. In this way, VoltDB obviates the need for locking and latching techniques.
\\\\
In short, VoltDB provides relational in memory storage for relatively large datasets, with very fast SQL-query capacities and ACID transactions. It is thus more suited for computation intensive applications that don't work on exorbitantly large data volumes but require very low latency.

\subsection{Cloudera Impala}

Cloudera Impala is a distributed SQL-engine running on top of the Hadoop stack, either on HDFS or HBase \cite{cloudera_impala}. It is intended specifically for analytical use, focussing on delivering real-time querying capacities and not on high-throughput on writes.
\\Data is accessible through a subset of SQL-92.
\\Impala has a highly efficient I/O-layer keeping disk- and CPU-utilization high at all times, resulting in considerably faster performance than other SQL-on-Hadoop solutions such as Apache Hive \cite{floratou2014sql}. However, this comes with the drawback that the working set of a query has to fit in the aggregate physical memory of the cluster it runs on. This puts some restrictions on the size of datasets processible with Impala, not fully using the scaling capacity of the underlying Hadoop layer.
\\Because of its analytical purposes, Impala doesn't offer extensive concurrency control features, relying on the datalayer underneath. With HBase's excellent concurrency control features, this doesn't necessarily pose a great problem.
 
\section{Conclusions}

In recent years, progress in microbiology and bioinformatics has driven down the cost of DNA-sequencing. As DNA of more and more organisms, people,... is being sequenced, the question arises to make this process ever more efficient and to store the generated data in a scalable, performant and accessible way. This study has focused on NoSQL and NewSQL datastores to be used in both the sequencing pipeline as in the storage and analysis of the results. These solutions offer elastic scalability, flexible data modelling, good behavior in a distributed setting and resilience to failures.\\
Specifically, this paper has reviewed 6 different datastores, 2 of the most popular ones in three categories, and compared them on a selection of properties relevant to HPC applications. 

\bibliography{biblio}{}
\bibliographystyle{plain}
\end{document}